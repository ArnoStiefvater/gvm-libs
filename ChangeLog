2007-07-26  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* CHANGES: Set release date to 27.7.2007

2007-07-26  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	Doing the release 0.9.0.

	* VERSION: Set to 0.9.0.

2007-07-25  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* libopenvas/proctitle.c (setproctitle):
	Change name of daemon from nessusd to openvasd.

	* include/config.h.in: Removed NESSUSD_USERNAME which is not
	used anywhere.

	* libopenvas/services.h: Changed paths from nessus to openvas.

2007-07-25  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* configure.in: replaced AC_HAVE_LIBRARY by AC_CHECK_LIB for
	gnutls, resolve and pcap and emit error when not found.
	Also replaced the not-so-helpful message after running
	configure with some more useful.

	* configure: updated.

	* libopenvas/Makefile: Fixed dependencies reg. network.h.

2007-07-25  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* MANIFEST: updated.

2007-07-25  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.h: Removed. Everything declared in network.h
	is also declared in libopenvas.h

	* libopenvas/pcap.c, libopenvas/network.c, libopenvas/ids_send.c:
	Remove includes of network.h

2007-07-24  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c (ovas_server_context_attach)
	(read_stream_connection_unbuffered)
	(write_stream_connection4, internal_send, internal_recv): Remove
	unused variables

2007-07-24  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c: Add missing include of <gnutls/x509.h>

2007-07-24  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c (verify_peer_certificate): Make status an
	unsigned int so that it matches the signature of
	gnutls_certificate_verify_peers2

2007-07-24  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c (set_gnutls_priorities)
	(set_gnutls_protocol): Renamed set_gnutls_priorities to
	set_gnutls_protocol
	(open_SSL_connection, ovas_server_context_attach): Updated because
	of set_gnutls_priorities renaming
	(set_gnutls_priorities): New function that sets the priorities of
	a session from a bunch of int arrays and handles errors
	(set_gnutls_sslv23, set_gnutls_sslv3, set_gnutls_tlsv1): Use
	set_gnutls_priorities to set the priorities instead of calling the
	gnutls functions directly.  Also return an error code properly.

2007-07-24  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c (nessus_SSL_init): Return a value (0) if
	already initialized

2007-07-24  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c (nessus_SSL_init): Make sure
	gnutls_global_init is only called once even if nessus_SSL_init is
	called multiple times.

2007-07-24  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c (load_file, unload_file): Use emalloc and
	efree to be consistent with the rest of the libopenvas code

2007-07-20  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* libopenvas/services.h: Fixed location of openvas-services.

2007-07-19  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* openvas-libraries.tmpl.in: Removed remains for libcap-nessus
	and PCAP_-variables

2007-07-19  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	First preparations for release.

	* include/libopenvas.h, include/config.h.in: Removed last occurances of HAVE_SSL.

	* MANIFEST: updated.

	* CHANGES: New. Describes Changes for users.

	* Makefile: No sbin required for installation of this package.

	* TODO: Removed item about libpcap which indeed has been removed
	meanwhile.

	* INSTALL_README: Added a warning that these instructions might
	not be uptodate.

2007-07-18  Bernhard Herzog  <bh@intevation.de>

	* include/includes.h: Remove openssl includes

2007-07-18  Bernhard Herzog  <bh@intevation.de>

	* include/libopenvas.h: Removed the declaration of
	nessus_register_connection that uses a SSL* as the second
	parameter.  The void* variant is still there.

2007-07-17  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.h, include/libopenvas.h: Remove declarations
	of unused and unimplemented functions:
	   stream_get_server_certificate
	   stream_get_ascii_server_certificate

2007-07-17  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c (nessus_install_passwd_cb, sslerror)
	(sslerror2): Removed.  They are no longer used anywhere.
	(stream_get_ssl): Change the return type to void* so that we no
	longer need openssl.h

	* include/libopenvas.h: Remove declaration of
	nessus_install_passwd_cb and sslerror.  Update declaration of
	stream_get_ssl

2007-07-02  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c (verify_peer_certificate): If the peer
	did not send a certificate, treat it as valid.

2007-07-02  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c (OVAS_CONNECTION_FROM_FD): New. Macro to
	determine the nessus_connection* given a nessus file descriptor
	(nessus_register_connection, ovas_allocate_connection): Most of
	nessus_register_connection is now in the new function
	ovas_allocate_connection.
	(set_gnutls_priorities): New.  Frontend for the other set_gnutls_*
	functions.
	(verify_peer_certificate): New.  Function to verify the peer
	certificate
	(open_SSL_connection): Use set_gnutls_priorities.
	(ovas_server_context_new): New.  Function to allocate an
	ovas_server_context_t
	(ovas_server_context_free): New.  Function to free an
	ovas_server_context_t
	(ovas_server_context_attach): New.  Functin to set up SSL/TLS on a
	socket with parameters from a ovas_server_context_t 

	* include/libopenvas.h: Add declarations for the new functions and
	types.  Always declare nessus_SSL_init.

2007-06-26  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* libhosts_gatherer/hg_add_hosts.c: Backported patch from original
	nessus-libraries branch NESSUS_2_2 as committed by Renaud Deraison
	June, 25 2007. Original commit message there: "bugfix".

2007-06-22  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c (nessus_SSL_password_cb): Removed because
	it's not used anymore.

2007-06-22  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c (nessus_SSL_init): Handle errors.

2007-06-22  Bernhard Herzog  <bh@intevation.de>

	* libopenvas-config.pre.in: remove the @pcap_flag@ substitution
	from the --libs output.  The pcap options are now in EXTRA anyway
	and @pcap_flag@ is no longer substituted.

2007-06-21  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	Removed local copy of pcap library.

	* configure.in, Makefile, libopenvas-config.pre.in:
	Removed any handling of libpcap-nessus

	* configure: updated with new autoconf version as of Debian etch

	* libpcap-nessus/: Removed entire directory.

2007-06-21  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c (nessus_install_passwd_cb): Use correct
	function name in error message

2007-06-21  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c (sslerror2, sslerror)
	(nessus_install_passwd_cb): Get rid of the last actual OpenSSL
	calls.  The implementations now simply print an error message and
	do nothing.

2007-06-20  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c (open_SSL_connection): Better error
	handling for the gnutls function calls.

2007-06-20  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c: Keep a pointer to the gnutls credentials
	struct so that it can be freed properly:
	(struct nessus_connection): New member tls_cred
	(release_connection_fd): Free tls_cred
	(open_SSL_connection): Store the credentials in the tls_cred
	member

2007-06-20  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c (load_file, unload_file): New. Helper
	functions to load certificates and keys.
	(load_cert_and_key): New.  Loads certificate and key files into
	the gnuTLS credentials object.  This function supports decryption
	of private keys.
	(open_SSL_connection): use load_cert_and_key to load the
	certificate and key.  Remove the warnign about unsupported key
	decryption.  Load the CA files if given.

2007-06-14  Bernhard Herzog  <bh@intevation.de>

	First step in the code to move from OpenSSL to GnuTLS.  The code
	in network.c now uses GnuTLS instead of OpenSSL for stream
	connections.  There are still a few remnants of the OpenSSL code,
	though and code using the library will still need to link -lssl.

	* libopenvas/network.c (struct nessus_connection)
	(release_connection_fd, nessus_register_connection, sslerror)
	(nessus_SSL_init, open_SSL_connection, open_stream_connection)
	(open_stream_connection_unknown_encaps5)
	(read_stream_connection_unbuffered, write_stream_connection4)
	(stream_pending): Use GnuTLS instead of OpenSSL.
	(stream_get_ssl): Now always returns NULL since there's no SSL*
	associated with a stream anymore.  See the comments in the code
	for some of the implications of this.
	(tlserror, set_gnutls_sslv23, set_gnutls_sslv3, set_gnutls_tlsv1):
	New functions for the GnuTLS support.

2007-06-04  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c (struct nessus_connection)
	(open_SSL_connection, write_stream_connection4): Remove
	nessus_connection member last_ssl_err because it's only assigned
	to, but never used.

2007-05-25  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* VERSION: Renamed from CVS to SVN.

	* TODO: Some more open questions.

	* include/includes.h: Removed a nessus header file.

2007-05-23  Bernhard Herzog  <bh@intevation.de>

	* libopenvas/network.c (data_left): Removed.  The function was
	commented out and never used.

2007-05-14  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* libopenvas/network.c: Renamed all closesocket() to close().
	closesocket() was a remain from trying to be NT compatible.

2007-05-14  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* configure: updated.

2007-05-14  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* Makefile: Fixed dependencies for target install. This
	way now also libopenvas-config gets created during install
	from libopenvas-config.tmpl which wasn't the case before.

2007-05-14  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* Makefile: Fixed name for libopenvas-config man page for installation.

2007-05-14  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* Makefile: installation target for headerfiles renamed from
	nessus to openvas.

2007-05-09  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	Introduce "make dist" to create a tar-ball.

	* VERSION: Set to .CVS.

	* MANIFEST: New. List of source files for dist.

	* Makefile: New target "dist".

2007-05-09  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* nessus-config.pre.in: Removed.

	* libopenvas-config.pre.in: New. Replaces nessus-config.pre.in.

	* nessus-config.1: Removed.

	* libopenvas-config.1: New. Replaces nessus-config.1.

	* configure.in, Makefile: Replace nessus-config by libopenvas-config.

2007-05-09  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* nessus-config.pre.in, Makefile: Removed DESTDIR. It looks
	pretty useless as it needs to be set in the shell.
	It was introduced in Nessus 1.3.1.

2007-05-09  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* libopenvas/plugutils.c: Removed any conditional alternatives
	for HAVE_SSL (ssl is mandatory now)

2007-05-09  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	First, intermediate step of migrating from OpenSSL to GNUTLS:
	Remove the all old stuff at the configure-level.

	* configure.in: Removed any  handling of OpenSSL and the
	conditional handling of SSL support. Inserterted mandatory
	requirement of GNUTLS.

	* configure: Updated.

	* openvas-libraries.tmpl.in, nessus-config.pre.in: Removed
	any OpenSSL handling.

2007-04-26  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* configure.in: Removed cygwin stuff.

2007-04-24  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* configure.in, Makefile, INSTALL_README: Removed handling of "uninstall-nessus".

	* uninstall-nessus.in: Removed.

2007-04-12  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	Removing various Windows related files.

	* README.WINDOWS, nmake.w32, nmake.bat, nessus.def,
	include/config.w32, include/ntcompat.h: Removed.

	* include/includes.h: Removed some W32-specific elements.

2007-03-29  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* Makefile, libopenvas/Makefile: Renaming libnessus to libopenvas.
	Fixing header from GPL to LGPL.

	* libopenvas/store.c, libopenvas/plugutils.c, libopenvas/ids_send.c,
	libopenvas/arglists.c, libopenvas/data.c, libopenvas/network.c,
	libopenvas/services.c, uninstall-nessus.in, include/includes.h:
	Added header. Renaming libnessus to libopenvas.

	* include/libnessus.h: Renamed to libopenvas.h.

	* include/libopenvas.h: New. Former libnessus.h.

2007-03-29  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* libnessus: Renamed to libopenvas.

	* libopenvas: New. Former libnessus.

2007-03-28  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* TODO: New. Keep a list of issues/ideas/plans for this module.

2007-03-28  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* openvas-libraries.tmpl.in: Added header.

	* Makefile, libhosts_gatherer/Makefile, libnessus/Makefile: Added header.
	Renamed nessus.tmpl to openvas-libraries.tmpl.

	* libpcap-nessus/Makefile.in: Renamed nessus.tmpl to openvas-libraries.tmpl.

	* configure: updated.

2007-03-28  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* nessus.tmpl.in: Removed (replaced by openvas-libraries.tmpl.in)

	* openvas-libraries.tmpl.in: Former nessus.tmpl

	* configure.in: Name change for .tmpl file.

2007-03-28  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* configure.in: Added header information.

	* ChangeLog: New. Summary of changes.

2007-03-28  Jan-Oliver Wagner <jan-oliver.wagner@intevation.de>

	* VERSION: Changed version number to 0.9.0 to not confuse with nessus
		versioning and to make clear that for OpenVAS this is not yet stable.
